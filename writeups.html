<div class="page slide-up">
  <h2 class="page-title">Write-ups</h2>

  <input id="searchBox" type="text" placeholder="Search write-ups‚Ä¶" />

  <div id="writeupsContainer" class="writeups-list"></div>
</div>

<script>
async function loadWriteups() {
  const container = document.getElementById("writeupsContainer");

  // List of files (edit names only here!)
  const files = [
    "weird",
    "stay",
    "everything"
  ];

  container.innerHTML = "";

  for (const name of files) {
    const res = await fetch(`/writeups/${name}.txt`);
    if (!res.ok) continue;

    const text = await res.text();
    const preview = text.substring(0, 150) + "...";

    const minutes = Math.max(1, Math.ceil(text.split(" ").length / 180));

    const card = `
      <a class="write-card" href="read.html?post=${name}">
        <h3>${name}</h3>
        <p>${preview}</p>
        <small>‚è± ${minutes} min read</small>
      </a>
    `;

    container.insertAdjacentHTML("beforeend", card);
  }
}

loadWriteups();


// üîç SEARCH
document.getElementById("searchBox").addEventListener("input", function () {
  const q = this.value.toLowerCase();
  document.querySelectorAll(".write-card").forEach(card => {
    card.style.display = card.textContent.toLowerCase().includes(q)
      ? "block"
      : "none";
  });
});
</script>

<style>
.write-card {
  display:block;
  padding:16px;
  margin:12px 0;
  border:1px solid #ddd;
  border-radius:8px;
  text-decoration:none;
  color:black;
  background:white;
}
.write-card:hover {
  background:#fafafa;
}
.write-card h3 { margin:0 0 8px; }
</style>
